rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Books storage
    // Note: Storage rules cannot query Firestore to check roles,
    // so we allow authenticated users to read/write and rely on
    // application-level security and Firestore rules for access control
    match /books/{allPaths=**} {
      // Allow public read access (needed for MinerU API to access PDFs)
      // MinerU is an external service that cannot authenticate
      allow read: if true;
      
      // Any authenticated user can write (admins need to upload reports)
      allow write: if request.auth != null;
    }
  }
}

